# 11Ïõî 4Ï£ºÏ∞® Ï£ºÍ∞ÑÌöåÏùòÎ°ù

## Ï£ºÍ∞Ñ ÏûëÏóÖ Î™©Î°ù

- [x] Ìè¨ÌÜ†ÏÉµ UXP Î∞∞Ìè¨Ï§ÄÎπÑ
- [x] ÌîÑÎ¶¨ÎØ∏Ïñ¥ÌîÑÎ°ú ÏΩîÎìú Î¶¨Ìå©ÌÜ†ÎßÅ
- [x] EV Global Codesign ÏßÑÌñâ
- [x] Ìè¨ÌÜ†ÏÉµ Ïπ¥Î©îÎùºÎ°úÏö∞ ÏûêÎ£å ÏÑúÏπò

## 1. Ìè¨ÌÜ†ÏÉµ UXP Î∞∞Ìè¨Ï§ÄÎπÑ

1Ï∞®Ï†ÅÏúºÎ°ú ÌîåÎü¨Í∑∏Ïù∏ ÌÖåÏä§Ìä∏ Î∞∞Ìè¨Î•º ÏúÑÌï¥ ÎßåÎì§Ïñ¥ÎÜìÏùÄ ÌîÑÎ°úÏ†ùÌä∏Ïóê Î≤ÑÏ†Ñ ÏóÖÎç∞Ïù¥Ìä∏ ÏãùÏúºÎ°ú ÏßÑÌñâ

![uxp](./asset/uxp.png)

- CEP Í∏∞Îä• Î™®Îëê Íµ¨ÌòÑ ÏôÑÎ£å
- ÌÖçÏä§Ìä∏ Í∏∞Îä• Ï∂îÍ∞Ä ÏôÑÎ£å
- Î†àÏù¥Ïñ¥ ÏßÅÏ†ë Ï†úÏñ¥ÌïòÎäî Í∏∞Îä• Ï∂îÍ∞ÄÏòàÏ†ï (ÌöåÏ†Ñ,ÌÅ¨Í∏∞Ï†úÏñ¥ Îì±)

## 2. ÌîÑÎ¶¨ÎØ∏Ïñ¥ÌîÑÎ°ú ÏΩîÎìú Î¶¨Ìå©ÌÜ†ÎßÅ

- ## üìÅsrc/modules.ts

```ts
interface CalcOption {
  value: number;
  diff: number;
  props: number;
  propsValueIndex: number | undefined;
}
interface CalcMotion {
  value: any;
  diff: number;
  props: number;
  propsValueIndex: number | undefined;
}
const PrOpacity = {
  modify(props: number, diff: number) {
    PrController.modify(props, diff, 'Opacity', this.calcNewValue);
  },
  calcNewValue(obj: CalcOption): number {
    const { value, diff } = obj;
    let newValue = value + diff * Math.abs(diff);
    return newValue;
  },
};

const PrMotion = {
  modify(props: number, diff: number, propsValueIndex: number) {
    PrController.modify(
      props,
      diff,
      'Motion',
      this.calcNewValue,
      propsValueIndex
    );
  },
  calcNewValue(obj: CalcMotion) {
    const { value, diff, propsValueIndex } = obj;
    let newValue: number | number[];
    if (propsValueIndex) {
      newValue = this.calcPositionValue(value, diff, propsValueIndex);
    } else {
      newValue = value + diff * Math.abs(diff);
    }
    return newValue;
  },
  calcPositionValue(value: any, diff: number, props: number): number[] {
    var standard = props === 0 ? 640 : 320;
    var newValue = standard * value[props] + diff * (Math.abs(diff) * 1.7);
    value[props] = newValue / standard;
    return value;
  },
};

const PrLumetri = {
  modify(props: number, diff: number) {
    const version = PrController.getAppVersion();
    props += version >= 22 ? 2 : 0;
    PrController.modify(props, diff, 'Lumetri Color', this.calcLumetri);
  },
  calcLumetri(obj: CalcOption) {
    const { value, diff, props } = obj;
    const version: number = parseInt(app.version.split('.')[0]);
    let newValue = value + diff * Math.abs(diff);
    let temp: number = version >= 22 ? 2 : 0;
    switch (props) {
      case 10 + temp:
      case 11 + temp:
        return PrUtils.minMax(newValue, -300, 300);
      default:
        return 0;
    }
  },
};
```

- ## üìÅsrc/controller.ts

```ts
const { clip, clipComponents } = this.getClip();
if (clipComponents && clip) {
  const name: string = clipComponents[0].displayName;
  const currentType: EN_DISPLAY_TYPE | KR_DISPLAY_TYPE = this.getDisplayName(
    name,
    type
  );
  for (let i: number = 0; i < clipComponents?.numItems; i++) {
    const { displayName } = clipComponents[i];
    if (currentType.indexOf(displayName) !== -1) {
      let targetEffect: Component = clipComponents[i];
      var targetProperty: ComponentParam = targetEffect.properties[props];
      if (!targetProperty.isTimeVarying()) {
        let value: number = targetProperty.getValue();

        // Í∞ùÏ≤¥Î≥Ñ Í≥ÑÏÇ∞ Î°úÏßÅ ÏΩúÎ∞±Ìï®ÏàòÎ°ú ÎÑòÍπÄ
        let newValue = cb({
          value,
          diff,
          props,
          propsValueIndex,
        });
        targetProperty.setValue(newValue, true);
        return newValue.toFixed(1);
      } else {
        let time: Time = app.project.activeSequence.getPlayerPosition();
        var clipTime =
          (time.seconds - clip.start.seconds + clip.inPoint.seconds) *
          clip.getSpeed();
        if (targetProperty.areKeyframesSupported() === true) {
          let value = targetProperty.getValueAtTime(clipTime);
          // Í∞ùÏ≤¥Î≥Ñ Í≥ÑÏÇ∞ Î°úÏßÅ ÏΩúÎ∞±Ìï®ÏàòÎ°ú ÎÑòÍπÄ

          let newValue = cb({
            value,
            diff,
            props,
            propsValueIndex,
          });
          targetProperty.addKey(clipTime);
          targetProperty.setValueAtKey(clipTime, newValue, true);
          return 'succeeded';
        }
      }
    }
  }
}
```

### Í∞úÏÑ† ÏôÑÎ£åÎêúÏ†ê

## 3. EV Global Codesign ÏßÑÌñâ

- ### SDK ÏÖãÌåÖ Î∞è Í∏∞ÏóÖÏö© Ïù∏Ï¶ùÏÑú Î∞úÍ∏â ÏôÑÎ£å

  ![ÏΩîÎìúÏÇ¨Ïù∏](./asset/Ïù∏Ï¶ùÏÑú.png)

- ### Ìå®ÌÇ§ÏßÄ ÏàòÏ†ï

  ![Ìå®ÌÇ§ÏßÄ ÏàòÏ†ï](./asset/Ìå®ÌÇ§ÏßÄ.png)

- ### ÏΩîÎìúÏÇ¨Ïù∏ ÏßÑÌñâ Î∞è ÏôÑÎ£å
  ![ÏΩîÎìúÏÇ¨Ïù∏ ÏôÑÎ£å](./asset/ÏΩîÎìúÏÇ¨Ïù∏ÏôÑÎ£å.png)

## 4. Ïπ¥Î©îÎùºÎ°úÏö∞

ÎùºÏù¥Ìä∏Î£∏, Î∏åÎ¶øÏßÄ, Ìè¨ÌÜ†ÏÉµ Îì±ÏúºÎ°ú Ìé∏ÏßëÏù¥ ÎÅùÎÇòÎ©¥  
Í≤∞Íµ≠ Ïπ¥Î©îÎùºÎ°úÏö∞ÏóêÏÑú Ìé∏ÏßëÏùÑ ÌïúÎ≤à ÎçîÌïòÍ≥† Ìè¨ÌÜ†ÏÉµÏúºÎ°ú Î≥¥Ï†ïÏùÑ Ìï®

Ïπ¥Î©îÎùº Î°úÏö∞Ïùò Í∞úÎ∞úÏùò ÌïÑÏöîÏÑ±ÏùÑ ÎäêÎÅºÍ≥† ÏÑúÏπò ÏãúÏûë

### - ÏÑúÏπò ÎÇ¥Ïö©

Î£®ÌîÑÎç±ÏùÑ ÌÖåÏä§Ìä∏ Ìï¥Î≥∏Í≤∞Í≥º

#### JSXÎ°ú Ï†úÏñ¥ÌïòÎäîÍ≤ÉÏùÄ ÏïÑÎãåÍ≤É Í∞ôÏùå

Ïπ¥Î©îÎùº Î°úÏö∞ ÏûêÏ≤¥Í∞Ä Ìè¨ÌÜ†ÏÉµ ÌîåÎü¨Í∑∏Ïù∏Ïù¥Í∏∞ ÎïåÎ¨∏Ïóê JSXÎ°ú Ïπ¥Î©îÎùºÎ°úÏö∞ Ï†úÏñ¥ÌïòÎäîÍ≤ÉÏùÄ Î∂àÍ∞ÄÎä•

#### LuaÏù∏Í∞Ä?

ÍººÍººÌûà Î≥¥Îãà ÎùºÏù¥Ìä∏Î£∏ ÌÅ¥ÎûòÏãùÍ≥º Ïπ¥Î©îÎùºÎ°úÏö∞Ïùò UIÍ∞Ä ÍµâÏû•Ìûà ÎπÑÏä∑ÌñàÎã§.

![cr](./asset/cr.png)
![lr](./asset/ÎùºÏù¥Ìä∏Î£∏.png)

Í∑∏ÎûòÏÑú Î£®ÏïÑÎ°ú Ï†úÏñ¥Ìï† Ïàò ÏûàÎäîÏßÄ Ï∞æÏïÑÎ≥∏ Í≤∞Í≥º Ïó≠Ïãú Î£®ÏïÑÎ°ú Ï†úÏñ¥ÌïòÎäîÍ≤ÉÏùÄ ÏïÑÎãàÏòÄÎã§.

#### UXPÎ°ú Í∞ÄÎä•Ìï†Íπå?

Î£®ÌîÑÎç± ÌîåÎü¨Í∑∏Ïù∏ÏùÑ ÏÇ≠Ï†úÌïòÍ≥† Ïπ¥Î©îÎùºÎ°úÏö∞Î•º Ï†úÏñ¥Ìï¥Î¥§ÎäîÎç∞ Ïûò ÏûëÎèôÎêòÏóàÎã§.
**Í≤∞Î°†ÏùÄ UXPÎèÑ ÏïÑÎãàÏòÄÎã§**

### - Î£®ÌîÑÎç± Î¶¨Î≤ÑÏã± ÏãúÏûë

Îã§ÌñâÌûàÎèÑ Î£®ÌîÑÎç± 3.0Î≤ÑÏ†ÑÏùÑ Î≥¥Í¥ÄÌïòÍ≥† ÏûàÏñ¥ÏÑú Î¶¨Î≤ÑÏã±ÏùÑ Ìï† Ïàò ÏûàÏóàÏùå.

ÍººÍººÌûà Î¶¨Î≤ÑÏã±ÏùÑ Ìï¥Î≥∏ Í≤∞Í≥º Í≤∞Íµ≠ `win32API`Î°ú Ìï¥ÏïºÌïòÎäîÍ≤ÉÏùÑ Î∞úÍ≤¨

### - Í∞úÎ∞ú

- Ïπ¥Î©îÎùºÎ°úÏö∞ Ï†úÏñ¥ ÌîåÎ°úÏö∞Ï∞®Ìä∏

![ÌîåÎ°úÏö∞Ï∞®Ìä∏](./asset/ÌîåÎ°úÏö∞Ï∞®Ìä∏.png)

- WIN32APIÎ°ú ÌÖåÏä§Ìä∏ ÏßÑÌñâ

![api](./asset/win32.png)

### - Í≤∞Í≥º

![Ïπ¥Î©îÎùºÎ°úÏö∞](./asset/Ïπ¥Î©îÎùºÎ°úÏö∞.png)
![Í≤∞Í≥º](./asset/Í≤∞Í≥ºÍ∞í.png)

### - Î¨∏Ï†úÏ†ê

ÏûêÎ∞îÏä§ÌÅ¨Î¶ΩÌä∏Î°ú Î≥ÄÌôòÌï¥ÏïºÌï®
ÏûêÎ∞îÏä§ÌÅ¨Î¶ΩÌä∏Îäî `Î∏åÎùºÏö∞Ï†ÄÍ∏∞Î∞ò` Ïñ∏Ïñ¥Ïó¨ÏÑú Ïö¥ÏòÅÏ≤¥Ï†úÍ∞Ä Ï†úÍ≥µÌï¥Ï£ºÎäî APIÍ∏∞Îä•Ïù¥ **ÌïúÏ†ïÏ†ÅÏûÑ**

![Í≤∞Í≥º](./asset/Î≥ÄÌôò.png)

Î¨∏Ï†úÎäî Ï†ïÌôïÌïú Ìï∏Îì§Í∞íÏù¥ ÏïàÎÇòÏò§Îäî Î¨∏Ï†ú

![Î¨∏Ï†ú](./asset/Î¨∏Ï†ú.png)

### - Ìï¥Í≤∞Î∞©Ïïà

1. Îã§Î•∏ APIÎ•º Ï∞æÏïÑÎ≥∏Îã§.
2. node-gyp Î•º ÏÇ¨Ïö©Ìï¥Î≥∏Îã§.
3. c#ÏúºÎ°ú dllÌååÏùºÏùÑ ÎßåÎì§Ïñ¥ ÏùºÎ†âÌä∏Î°†Ïù¥Îûë Ïó∞ÎèôÌïúÎã§.
